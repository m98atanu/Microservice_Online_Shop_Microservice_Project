package com.microservices.demo.service;

import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.microservices.demo.model.CustomerEntity;
import com.microservices.demo.repository.CustomerAddressRepository;
import com.microservices.demo.repository.CustomerRepository;

@Service
public class CustomerService {
	
	@Autowired CustomerRepository customerRepo;
	@Autowired CustomerAddressRepository customerAddressRepo;
	
	public int addCustomer (CustomerEntity customer) throws Exception{
		Optional<CustomerEntity> customerInDbWithSameEmail = 
				customerRepo.findByCustomerEmail(customer.getCustomerEmail());
		if(customerInDbWithSameEmail.isEmpty()) {
			return customerRepo.save(customer).getCustomerId();
		}
		else throw new Exception("The email address has used, Please provide unique email id to proceed");
	}
}
